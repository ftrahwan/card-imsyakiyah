<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Imsakiyah</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f0f2f5;
        margin: 0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .main-container {
        width: 100%;
        max-width: 400px;
        margin: 0 12px;
        gap: 16px;
        position: relative;
        overflow: hidden;
      }

      .header-container {
        display: flex;
        flex-direction: column;
        gap: 0px;
      }

      .card-container {
        display: flex;
        flex-direction: column;
        gap: 0px;
      }

      .next-prayer {
        color: black;
        text-align: right;
        padding: 30px;
        background-color: #fadbbc;
        position: relative;
        border-radius: 4px 4px 0 0;
      }

      .next-prayer h2 {
        margin: 0;
        font-size: 24px;
      }

      .next-prayer p {
        margin: 5px 0;
        opacity: 0.8;
      }

      .dropdown select {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;

        border: 2px solid #005670;
        border-radius: 4px;
        padding: 12px 16px;
        font-size: 16px;
        color: #c8c8c8;
        width: 100%;
        box-sizing: border-box;
        cursor: pointer;
      }

      .dropdown {
        position: relative;
        width: 100%;
        margin: 16px 0;
      }

      .dropdown::after {
        content: "â–¼";
        position: absolute;
        top: 50%;
        right: 15px;
        transform: translateY(-50%);
        font-size: 12px;
        color: #005670;
      }

      .schedule-grid {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 24px 24px;
        background-color: #005670;
        border-radius: 0 0 4px 4px;
      }

      .schedule-item {
        background-color: #e69849;
        padding: 16px 16px;
        border-radius: 2px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: white;
        transition: all 0.3s ease;
      }

      .schedule-item h3 {
        margin: 0;
        font-size: 16px;
        font-weight: 700;
        text-transform: uppercase;
      }

      .schedule-item p {
        margin: 0;
        font-size: 16px;
        font-weight: 500;
      }

      .date {
        color: black;
        text-align: center;
      }

      .monthly-schedule table {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
        margin: 16px 0;
        border-radius: 2px;
        overflow: hidden;
      }

      .monthly-schedule th {
        background-color: #005670;
        color: white;
        padding: 8px;
        text-align: center;
      }

      .monthly-schedule td {
        padding: 8px;
        text-align: center;
      }

      .monthly-schedule tbody tr:nth-child(odd) {
        background-color: #f0f2f5;
      }

      .monthly-schedule tbody tr:nth-child(even) {
        background-color: #ffffff;
      }
    </style>
  </head>

  <body>
    <div class="main-container">
      <div class="header-container">
        <h1 style="text-align: center">Jadwal Imsakiyah</h1>
        <div class="date" id="current-date"></div>
        <div class="dropdown">
          <select onchange="updateSchedule(this.value)" id="citySelect">
            <option value="jakarta">Kota Jakarta</option>
            <option value="surabaya">Kota Surabaya</option>
            <option value="bandung">Kota Bandung</option>
          </select>
        </div>
      </div>
      <div class="card-container">
        <div class="next-prayer">
          <h2></h2>
          <p></p>
        </div>
        <div class="schedule-grid">
          <div class="schedule-item">
            <h3>Imsak</h3>
            <p id="imsak"></p>
          </div>
          <div class="schedule-item">
            <h3>Shubuh</h3>
            <p id="subuh"></p>
          </div>
          <div class="schedule-item">
            <h3>Dhuhur</h3>
            <p id="dzuhur"></p>
          </div>
          <div class="schedule-item">
            <h3>Ashar</h3>
            <p id="ashar"></p>
          </div>
          <div class="schedule-item">
            <h3>Maghrib</h3>
            <p id="maghrib"></p>
          </div>
          <div class="schedule-item">
            <h3>Isya</h3>
            <p id="isya"></p>
          </div>
        </div>
      </div>
      <div class="monthly-schedule">
        <table>
          <thead>
            <tr>
              <th>Tanggal</th>
              <th>Imsak</th>
              <th>Subuh</th>
              <th>Dzuhur</th>
              <th>Ashar</th>
              <th>Maghrib</th>
              <th>Isya</th>
            </tr>
          </thead>
          <tbody id="monthly-schedule-body"></tbody>
        </table>
      </div>
    </div>
  </body>
  <script>
    const prayerSchedules = {
      jakarta: {
        imsak: "04:09",
        subuh: "04:19",
        dzuhur: "12:00",
        ashar: "15:26",
        maghrib: "18:14",
        isya: "19:29",
      },
      surabaya: {
        imsak: "03:43",
        subuh: "03:53",
        dzuhur: "11:36",
        ashar: "15:02",
        maghrib: "17:52",
        isya: "19:08",
      },
      bandung: {
        imsak: "04:05",
        subuh: "04:15",
        dzuhur: "11:57",
        ashar: "15:23",
        maghrib: "18:16",
        isya: "19:15",
      },
    };

    // Fungsi untuk menampilkan tanggal sekarang dan menetapkan kota default
    function initializeSchedule() {
      const defaultCity = "jakarta";
      document.getElementById("citySelect").value = defaultCity;

      // Tampilkan tanggal saat ini
      const currentDateElement = document.getElementById("current-date");
      const now = new Date();
      const options = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      };
      currentDateElement.textContent = now.toLocaleDateString("id-ID", options);

      // Generate tabel awal dengan data default
      populateMonthlySchedule(defaultCity);

      // Perbarui card berdasarkan tanggal sekarang
      updateCardWithTodaySchedule();
    }

    function populateMonthlySchedule(city) {
      const schedule = prayerSchedules[city];
      const tbody = document.getElementById("monthly-schedule-body");
      tbody.innerHTML = ""; // Kosongkan tabel sebelumnya

      const daysInMonth = new Date(
        new Date().getFullYear(),
        new Date().getMonth() + 1,
        0
      ).getDate(); // Hari dalam bulan ini

      for (let day = 1; day <= daysInMonth; day++) {
        const tr = document.createElement("tr");
        const dateCell = document.createElement("td");
        dateCell.textContent = `${day}`.padStart(2, "0");
        tr.appendChild(dateCell);

        // Tambahkan waktu untuk setiap jadwal dengan pola penambahan menit
        const updatedSchedule = Object.keys(schedule).reduce((acc, key) => {
          const [hours, minutes] = schedule[key].split(":").map(Number);
          const totalMinutes = hours * 60 + minutes + (day - 1); // Tambah menit berdasarkan hari
          const newHours = Math.floor(totalMinutes / 60) % 24;
          const newMinutes = totalMinutes % 60;
          acc[key] = `${newHours.toString().padStart(2, "0")}:${newMinutes
            .toString()
            .padStart(2, "0")}`;
          return acc;
        }, {});

        // Masukkan data ke dalam tabel
        ["imsak", "subuh", "dzuhur", "ashar", "maghrib", "isya"].forEach(
          (key) => {
            const cell = document.createElement("td");
            cell.textContent = updatedSchedule[key];
            tr.appendChild(cell);
          }
        );

        tbody.appendChild(tr);
      }
    }

    // Event handler untuk dropdown
    function updateSchedule(city) {
      // Perbarui jadwal harian di card
      const schedule = prayerSchedules[city];
      document.getElementById("imsak").textContent = schedule.imsak;
      document.getElementById("subuh").textContent = schedule.subuh;
      document.getElementById("dzuhur").textContent = schedule.dzuhur;
      document.getElementById("ashar").textContent = schedule.ashar;
      document.getElementById("maghrib").textContent = schedule.maghrib;
      document.getElementById("isya").textContent = schedule.isya;

      // Perbarui tabel jadwal bulanan
      populateMonthlySchedule(city);
    }

    // Set jadwal default untuk kota pertama (Jakarta)
    document.addEventListener("DOMContentLoaded", () => {
      const defaultCity = "jakarta";
      document.getElementById("citySelect").value = defaultCity;
      updateSchedule(defaultCity);
    });
  </script>
</html>
